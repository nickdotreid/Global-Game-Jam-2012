{% extends "pages/game_map.html" %}

{% block scripts %}
{{super()}}
<script type="text/javascript">
	$(document).ready(function(event){
		$(".challenge").bind("show",function(){
			challenge = $(this);
			$(".map").trigger({
				type:"add_marker",
				lat:challenge.data("lat"),
				lng:challenge.data("lng")
			});
		}).bind("click",function(){
			$(this).trigger("show");
		});
		setTimeout('$(".challenge:first").click();',500);
	});
</script>
{% endblock %}

{% block content %}
{% if challenge.completed %}
<h3>Ball Caught</h3>
{% endif %}
<form method="POST" action="{{ url_for('.game_challenge',key=game.short) }}">
	<legend>Catch the ball</legend>
	<label><input class="challenge" data-lat="{{challenge.lat}}" data-lng="{{challenge.lng}}" type="radio" name="challenge_id" value="{{challenge.id}}" /> The Ball</label>
	<input class="user coords" type="hidden" name="lat" />
	<input class="user coords" type="hidden" name="lng" />
	<div class="map"></div>
	<input type="submit" value="I'm Here" />
</form>
<form method="post" action="{{ url_for('.challenge_delete',id=challenge.id) }}">
	<!-- add reasons here?? -->
	<input type="submit" value="Really Bad Idea" />
</form>
{% endblock %}